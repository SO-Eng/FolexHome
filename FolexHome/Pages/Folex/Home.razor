@page "/Folex/Home"
@using System.Globalization

@inject HttpClient Http

    <div style="background-color: #f0f3f8; height: 90vh">

        <h3>Folex Landingpage</h3>

        @if (!string.IsNullOrWhiteSpace(errorString))
        {
            <h4>System Error</h4>
            <p>@errorString</p>
        }
        else if (coinList is null)
        {
            <h4>Record Loading... <a class="spinner-border text-info"></a></h4>
        }
        else
        {
            <div class="container" style="margin-top: 4em">
                <table class="table table-hover" style="background-color: white;">
                    <thead style="background-image: linear-gradient(to right, #e23b55 , #2f086e); color: white">
                    <tr>
                        <th>PAIR</th>
                        <th>COIN</th>
                        <th>LAST PRICE</th>
                        <th>24H CHANGE</th>
                        <th>24H HIGH</th>
                        <th>24H LOW</th>
                        <th>24H VOLUME</th>
                        <th>USD RATE</th>
                    </tr>
                    </thead>
                    <tbody>
                    @foreach (var coin in coinList)
                    {
                        <tr>
                            <td>@coin.Pair</td>
                            <td>@coin.CoinName</td>
                            <td style="text-align: right">@coin.BtcRate</td>
                            @if (!@coin.IsRateDown)
                            {
                                <td style="color: limegreen; text-align: right">@coin.DayChangeP.ToString("P")</td>
                            }
                            else
                            {
                                <td style="color: crimson; text-align: right">@coin.DayChangeP.ToString("P")</td>
                            }
                            <td>@coin.HighPrice</td>
                            <td>@coin.LowPrice</td>
                            <td>@Math.Round(coin.VolumeBtc, 8)</td>
                            <td style="padding: 0 0.75rem; font-family: sans-serif; font-size: 13px; font-weight: 300; line-height: 30px; text-align: right">@coin.UsdPrice.ToString("C", CultureInfo.CreateSpecificCulture("en-US"))</td>
                        </tr>
                    }
                    </tbody>
                </table>
            </div>
        }
    </div>

@code
{
    private List<CoinListModel> coinList;
    private string errorString;

    protected override async Task OnInitializedAsync()
    {
        HttpResponseMessage response = await Http.GetAsync("coinListJson/coinList.json");

        if (response.IsSuccessStatusCode)
        {
            coinList = await response.Content.ReadFromJsonAsync<List<CoinListModel>>();
        }
        else
        {
            errorString = response.ReasonPhrase;
        }
    }
}

<style>

    .table thead th {
        padding: 0 0.75rem;
        font-family: sans-serif;
        font-size: 13px;
        font-weight: 300;
        line-height: 25px;
        border-bottom: 0px
    }

    .table tbody td {
        padding: 0 0.75rem;
        font-family: sans-serif;
        font-size: 13px;
        font-weight: 300;
        line-height: 30px;
    }

</style>